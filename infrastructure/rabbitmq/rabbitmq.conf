# =============================================================================
# RabbitMQ Configuration
# Event bus for microservices communication
# =============================================================================

# -----------------------------------------------------------------------------
# LISTENERS
# -----------------------------------------------------------------------------
listeners.tcp.default = 5672
management.tcp.port = 15672

# -----------------------------------------------------------------------------
# DEFAULT USER
# -----------------------------------------------------------------------------
default_user = admin
default_pass = admin_password_change_me
default_vhost = /

# -----------------------------------------------------------------------------
# MEMORY & DISK
# -----------------------------------------------------------------------------
# Memory high watermark (40% of RAM)
vm_memory_high_watermark.relative = 0.4

# Disk free limit (1GB minimum)
disk_free_limit.absolute = 1GB

# -----------------------------------------------------------------------------
# CLUSTERING
# -----------------------------------------------------------------------------
cluster_formation.peer_discovery_backend = classic_config
cluster_formation.classic_config.nodes.1 = rabbit@rabbitmq

# -----------------------------------------------------------------------------
# QUEUE SETTINGS
# -----------------------------------------------------------------------------
# Default queue type
default_queue_type = quorum

# Queue message TTL (7 days)
# consumer_timeout = 604800000

# -----------------------------------------------------------------------------
# CONNECTIONS
# -----------------------------------------------------------------------------
# Heartbeat timeout (60 seconds)
heartbeat = 60

# Channel max
channel_max = 2047

# Frame max
frame_max = 131072

# Handshake timeout
handshake_timeout = 10000

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
log.console = true
log.console.level = info
log.file = /var/log/rabbitmq/rabbit.log
log.file.level = info
log.file.rotation.date = $D0
log.file.rotation.count = 7

# -----------------------------------------------------------------------------
# MANAGEMENT PLUGIN
# -----------------------------------------------------------------------------
management.load_definitions = /etc/rabbitmq/definitions.json

# -----------------------------------------------------------------------------
# PROMETHEUS METRICS
# -----------------------------------------------------------------------------
prometheus.return_per_object_metrics = true
